{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/v-zacharyhe/Documents/GitHub/eventhub/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter, inject } from '@angular/core';\nimport { Frame, Pen, MotionController, series, Stage } from 'zimjs';\nimport { MatrixUI } from './matriz/matriz';\nimport { SetUpUI } from './settings/settings';\nimport { ModelService } from '../services/model/model.service';\nimport { blobToImage } from './loader/fileloader';\nimport * as i0 from \"@angular/core\";\nexport class Ui3DComponent {\n  constructor() {\n    this.modelMetadata = [];\n    this.AdditionAction = new EventEmitter();\n    this.currentChair = [2, 0];\n    this.modelService = inject(ModelService);\n    this.modelImgs = new Map();\n    this.images = [];\n    this.title = 'ZIM Template';\n    this.settings = SetUpUI.setUpUI(350, 600, 20, 15, 3, 21, 10, 3);\n  }\n  ngOnDestroy() {\n    this.frame?.dispose();\n  }\n  ngAfterContentInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      // hardcoded have to change of course with the setting parameters.\n      const divisionwidth = 0.0476;\n      const divisionheight = 0.15;\n      _this.frame = new Frame({\n        scaling: \"zim\",\n        width: 400,\n        height: 600,\n        color: lighter,\n        outerColor: blue,\n        mouseMoveOutside: true,\n        // so Pen and Dial work better\n        ready: function () {\n          var _ref = _asyncToGenerator(function* () {\n            const pen = new Pen({\n              min: 10,\n              max: 60\n            }, series(pink, white)).addTo().bot();\n            _this.stage = new Stage(\"1\");\n            new MotionController(pen, \"pressmove\");\n            console.log(_this.settings);\n            const imgs = yield blobToImage(_this.images[0]);\n            _this.matriz = new MatrixUI(_this.settings.width, _this.settings.height, _this.settings.x, _this.settings.y);\n            _this.matriz.onCellClick = (row, col) => {\n              console.log(`Cell clicked at row: ${row}, col: ${col}`);\n              _this.AdditionAction.emit({\n                x: col,\n                z: row\n              });\n            };\n          });\n          return function ready() {\n            return _ref.apply(this, arguments);\n          };\n        }()\n      });\n    })();\n  }\n  static {\n    this.ɵfac = function Ui3DComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || Ui3DComponent)();\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: Ui3DComponent,\n      selectors: [[\"app-ui3d\"]],\n      inputs: {\n        modelMetadata: \"modelMetadata\",\n        images: \"images\"\n      },\n      outputs: {\n        AdditionAction: \"AdditionAction\"\n      },\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 3,\n      vars: 0,\n      consts: [[\"id\", \"event-manager-system-parent\"], [\"id\", \"parent\"], [\"id\", \"zim\"]],\n      template: function Ui3DComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n          i0.ɵɵelement(2, \"div\", 2);\n          i0.ɵɵelementEnd()();\n        }\n      },\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\", \"#event-manager-system-parent[_ngcontent-%COMP%] {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: center;\\n    justify-content: center;\\n    align-items: center;\\n    height: 100vh;\\n  }\"]\n    });\n  }\n}","map":{"version":3,"names":["EventEmitter","inject","Frame","Pen","MotionController","series","Stage","MatrixUI","SetUpUI","ModelService","blobToImage","Ui3DComponent","constructor","modelMetadata","AdditionAction","currentChair","modelService","modelImgs","Map","images","title","settings","setUpUI","ngOnDestroy","frame","dispose","ngAfterContentInit","_this","_asyncToGenerator","divisionwidth","divisionheight","scaling","width","height","color","lighter","outerColor","blue","mouseMoveOutside","ready","_ref","pen","min","max","pink","white","addTo","bot","stage","console","log","imgs","matriz","x","y","onCellClick","row","col","emit","z","apply","arguments","selectors","inputs","outputs","standalone","features","i0","ɵɵStandaloneFeature","decls","vars","consts","template","Ui3DComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd"],"sources":["C:\\Users\\v-zacharyhe\\Documents\\GitHub\\eventhub\\frontend\\src\\app\\ui3d\\ui3d.component.ts","C:\\Users\\v-zacharyhe\\Documents\\GitHub\\eventhub\\frontend\\src\\app\\ui3d\\ui3d.component.html"],"sourcesContent":["import { AfterContentInit, Component, EventEmitter, inject, Input, OnDestroy, Output, SimpleChange, SimpleChanges } from '@angular/core'\r\nimport { Frame, Circle, Dial, Emitter, Pen, MotionController, series, LabelOnArc, Tile, Rectangle, Bitmap, Stage, Carousel, DisplayObject } from 'zimjs'\r\nimport { MatrixUI } from './matriz/matriz'\r\nimport { settings, SetUpUI } from './settings/settings'\r\nimport * as UICommands from './commands/commands'\r\nimport { AssetModel } from '../interfaces'\r\nimport { AuthService } from '../services/auth.service'\r\nimport { ModelService } from '../services/model/model.service'\r\nimport { blobsToImages, blobToImage } from './loader/fileloader'\r\n\r\n@Component({\r\n    selector: 'app-ui3d',\r\n    standalone: true,\r\n    templateUrl: './ui3d.component.html',\r\n    styleUrls: ['./ui3d.component.css']\r\n})\r\nexport class Ui3DComponent implements OnDestroy, AfterContentInit {\r\n    frame: Frame | undefined\r\n    @Input() modelMetadata: AssetModel[] = [];\r\n    @Output() AdditionAction: EventEmitter<UICommands.addtion> = new EventEmitter<UICommands.addtion>()\r\n    currentChair: number[] = [2, 0];\r\n    matriz?: MatrixUI;\r\n    settings: settings;\r\n    modelService: ModelService = inject(ModelService);\r\n    modelImgs: Map<number, Bitmap> = new Map<number, Bitmap>();\r\n    @Input() images: Blob[] = [];\r\n    stage: Stage | undefined;\r\n    \r\n    constructor() {\r\n        this.settings = SetUpUI.setUpUI(\r\n            350, 600, 20, 15, 3, 21, 10, 3);\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.frame?.dispose()\r\n    }\r\n\r\n    async ngAfterContentInit() {\r\n        // hardcoded have to change of course with the setting parameters.\r\n        const divisionwidth = 0.0476;\r\n        const divisionheight = 0.15;\r\n\r\n        this.frame = new Frame({\r\n            scaling: \"zim\",\r\n            width: 400,\r\n            height: 600,\r\n            color: lighter,\r\n            outerColor: blue,\r\n            mouseMoveOutside: true, // so Pen and Dial work better\r\n            ready: async () => {\r\n\r\n                const pen = new Pen({ min: 10, max: 60 }, series(pink, white))\r\n                    .addTo()\r\n                    .bot()\r\n\r\n                this.stage = new Stage(\"1\");\r\n\r\n                new MotionController(pen, \"pressmove\")\r\n\r\n                console.log(this.settings);\r\n                const imgs = await blobToImage(this.images[0]);\r\n\r\n                this.matriz = new MatrixUI(this.settings.width, this.settings.height, this.settings.x, this.settings.y);\r\n\r\n                this.matriz.onCellClick = (row: number, col: number) => {\r\n                    console.log(`Cell clicked at row: ${row}, col: ${col}`);\r\n                    this.AdditionAction.emit({\r\n                        x: col,\r\n                        z: row\r\n                    });\r\n                }\r\n\r\n            } \r\n        }) \r\n\r\n    } \r\n\r\n    title = 'ZIM Template';\r\n}\r\n","\r\n<style>\r\n\r\n</style>\r\n\r\n\r\n<style>\r\n  #event-manager-system-parent {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: center;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100vh;\r\n  }\r\n</style>\r\n<div id=\"event-manager-system-parent\">\r\n  <div id=\"parent\">\r\n    <div id=\"zim\"></div>\r\n  </div>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}